---
title: 'Madison Area Bike Shops and Repair Stations'
output: 
  html_fragment:
    self_contained: false
    lib_dir: lib 
---


This is an interactive map of approved locations for Madison Bike Week 2021. These locations have been vetted and already have city permits (or do not need permits). The following document may help with specific set-up locations for bike stations: https://drive.google.com/file/d/1QCq1-kSa_KqMF2tqCaWmxwqxxBg7Iovs/view. If you plan on using a location not on the list, please mark "other" and let us know so we can add it to the map. Note: if on city or private property, you are responsible for obtaining a permission and/or permits if needed. 



```{r echo=FALSE, results=FALSE, message=FALSE}
library(leaflet)
library(googlesheets4)
library(tidyverse)
library(sf)

gs4_deauth()

#read sheet with location info
df <- read_sheet("https://docs.google.com/spreadsheets/d/1G41V3OVAI5P67d7L9Xl0DNLsjpnCRn3V00WylrZ5kHo/")

# # read repair stations file from City of Madison Open Data portal
# download.file("https://opendata.arcgis.com/datasets/76d43c3b570246bb98d6f44f0400c000_34.zip", "data/repair_stations.zip")
# unzip("data/repair_stations.zip", exdir = "./data")
# file.remove("data/repair_stations.zip")
# repair_stations <- st_read("data/Bike_Repair_Station.shp")
# 
# repair_stations <- repair_stations %>% 
#   mutate(pop = paste0("<b>Repair station</b><br>",Descriptio)) %>% 
#   select(pop)


locations <- df %>%
  separate(Location, into = c("Lat", "Long"), sep = ",") %>% 
  mutate(pop = Name) %>% #popup field; we can add stuff later
  mutate(Lat = as.numeric(Lat), Long = as.numeric(Long))
```


```{r echo=FALSE, warning=FALSE}

location_icon <- makeAwesomeIcon(icon = "bicycle",
                         library = "fa")
# repair_icon <- makeAwesomeIcon(icon = "wrench",
#                                library = "fa")

locations %>% 
  leaflet(width = "90%") %>% 
  addProviderTiles(provider = "Stamen.TonerLite") %>%
  addAwesomeMarkers(lng = ~Long, lat = ~Lat, popup = ~pop, icon = location_icon)
  
```

Last update: `r Sys.time()`